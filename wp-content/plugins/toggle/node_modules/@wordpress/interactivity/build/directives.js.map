{"version":3,"names":["_preact","require","_hooks","_utils","_hooks2","_scopes","_proxies","deepClone","source","isPlainObject","Object","fromEntries","entries","map","key","value","Array","isArray","i","wrapEventAsync","event","handler","get","target","prop","receiver","warn","Function","args","apply","Proxy","newRule","ruleClean","ruleNewline","empty","cssStringToObject","val","tree","block","left","exec","replace","shift","trim","unshift","getGlobalEventDirective","type","directives","evaluate","filter","isNonDefaultDirectiveSuffix","forEach","entry","eventName","suffix","split","useInit","cb","result","sync","globalVar","window","document","addEventListener","removeEventListener","getGlobalAsyncEventDirective","splitTask","passive","_default","directive","context","props","children","inheritedContext","Provider","defaultEntry","find","isDefaultDirectiveSuffix","client","inheritedClient","server","inheritedServer","useContext","ns","namespace","useRef","proxifyState","readOnly","contextStack","useMemo","deepMerge","current","proxifyContext","createElement","priority","watch","useWatch","start","globalThis","IS_GUTENBERG_PLUGIN","SCRIPT_DEBUG","performance","now","measure","end","detail","devtools","track","init","on","element","events","Map","has","set","Set","add","eventType","existingHandler","onAsync","class","classNames","className","currentClass","classFinder","RegExp","test","ref","classList","remove","style","styleProp","removeProperty","bind","attribute","el","cssText","undefined","err","setAttribute","removeAttribute","Type","innerHTML","rest","cached","dangerouslySetInnerHTML","__html","text","toString","e","run","each","eachKey","inheritedValue","iterable","Symbol","iterator","itemProp","kebabToCamelCase","item","itemContext","mergedContext","scope","getScope","serverContext","getEvaluate","push","content","exports","default"],"sources":["@wordpress/interactivity/src/directives.tsx"],"sourcesContent":["// eslint-disable-next-line eslint-comments/disable-enable-pair\n/* eslint-disable react-hooks/exhaustive-deps */\n\n/**\n * External dependencies\n */\nimport { h as createElement, type VNode, type RefObject } from 'preact';\nimport { useContext, useMemo, useRef } from 'preact/hooks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tuseWatch,\n\tuseInit,\n\tkebabToCamelCase,\n\twarn,\n\tsplitTask,\n\tisPlainObject,\n} from './utils';\nimport {\n\tdirective,\n\tgetEvaluate,\n\tisDefaultDirectiveSuffix,\n\tisNonDefaultDirectiveSuffix,\n\ttype DirectiveCallback,\n\ttype DirectiveEntry,\n} from './hooks';\nimport { getScope } from './scopes';\nimport { proxifyState, proxifyContext, deepMerge } from './proxies';\n\n/**\n * Recursively clone the passed object.\n *\n * @param source Source object.\n * @return Cloned object.\n */\nfunction deepClone< T >( source: T ): T {\n\tif ( isPlainObject( source ) ) {\n\t\treturn Object.fromEntries(\n\t\t\tObject.entries( source as object ).map( ( [ key, value ] ) => [\n\t\t\t\tkey,\n\t\t\t\tdeepClone( value ),\n\t\t\t] )\n\t\t) as T;\n\t}\n\tif ( Array.isArray( source ) ) {\n\t\treturn source.map( ( i ) => deepClone( i ) ) as T;\n\t}\n\treturn source;\n}\n\n/**\n * Wraps event object to warn about access of synchronous properties and methods.\n *\n * For all store actions attached to an event listener the event object is proxied via this function, unless the action\n * uses the `withSyncEvent()` utility to indicate that it requires synchronous access to the event object.\n *\n * At the moment, the proxied event only emits warnings when synchronous properties or methods are being accessed. In\n * the future this will be changed and result in an error. The current temporary behavior allows implementers to update\n * their relevant actions to use `withSyncEvent()`.\n *\n * For additional context, see https://github.com/WordPress/gutenberg/issues/64944.\n *\n * @param event Event object.\n * @return Proxied event object.\n */\nfunction wrapEventAsync( event: Event ) {\n\tconst handler = {\n\t\tget( target: Event, prop: string | symbol, receiver: any ) {\n\t\t\tconst value = target[ prop ];\n\t\t\tswitch ( prop ) {\n\t\t\t\tcase 'currentTarget':\n\t\t\t\t\twarn(\n\t\t\t\t\t\t`Accessing the synchronous event.${ prop } property in a store action without wrapping it in withSyncEvent() is deprecated and will stop working in WordPress 6.9. Please wrap the store action in withSyncEvent().`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'preventDefault':\n\t\t\t\tcase 'stopImmediatePropagation':\n\t\t\t\tcase 'stopPropagation':\n\t\t\t\t\twarn(\n\t\t\t\t\t\t`Using the synchronous event.${ prop }() function in a store action without wrapping it in withSyncEvent() is deprecated and will stop working in WordPress 6.9. Please wrap the store action in withSyncEvent().`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( value instanceof Function ) {\n\t\t\t\treturn function ( this: any, ...args: any[] ) {\n\t\t\t\t\treturn value.apply(\n\t\t\t\t\t\tthis === receiver ? target : this,\n\t\t\t\t\t\targs\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t};\n\n\treturn new Proxy( event, handler );\n}\n\nconst newRule =\n\t/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g;\nconst ruleClean = /\\/\\*[^]*?\\*\\/|  +/g;\nconst ruleNewline = /\\n+/g;\nconst empty = ' ';\n\n/**\n * Convert a css style string into a object.\n *\n * Made by Cristian Bote (@cristianbote) for Goober.\n * https://unpkg.com/browse/goober@2.1.13/src/core/astish.js\n *\n * @param val CSS string.\n * @return CSS object.\n */\nconst cssStringToObject = (\n\tval: string\n): Record< string, string | number > => {\n\tconst tree = [ {} ];\n\tlet block, left;\n\n\twhile ( ( block = newRule.exec( val.replace( ruleClean, '' ) ) ) ) {\n\t\tif ( block[ 4 ] ) {\n\t\t\ttree.shift();\n\t\t} else if ( block[ 3 ] ) {\n\t\t\tleft = block[ 3 ].replace( ruleNewline, empty ).trim();\n\t\t\ttree.unshift( ( tree[ 0 ][ left ] = tree[ 0 ][ left ] || {} ) );\n\t\t} else {\n\t\t\ttree[ 0 ][ block[ 1 ] ] = block[ 2 ]\n\t\t\t\t.replace( ruleNewline, empty )\n\t\t\t\t.trim();\n\t\t}\n\t}\n\n\treturn tree[ 0 ];\n};\n\n/**\n * Creates a directive that adds an event listener to the global window or\n * document object.\n *\n * @param type 'window' or 'document'\n */\nconst getGlobalEventDirective = (\n\ttype: 'window' | 'document'\n): DirectiveCallback => {\n\treturn ( { directives, evaluate } ) => {\n\t\tdirectives[ `on-${ type }` ]\n\t\t\t.filter( isNonDefaultDirectiveSuffix )\n\t\t\t.forEach( ( entry ) => {\n\t\t\t\tconst eventName = entry.suffix.split( '--', 1 )[ 0 ];\n\t\t\t\tuseInit( () => {\n\t\t\t\t\tconst cb = ( event: Event ) => {\n\t\t\t\t\t\tconst result = evaluate( entry );\n\t\t\t\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\t\t\t\tif ( ! result?.sync ) {\n\t\t\t\t\t\t\t\tevent = wrapEventAsync( event );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresult( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tconst globalVar = type === 'window' ? window : document;\n\t\t\t\t\tglobalVar.addEventListener( eventName, cb );\n\t\t\t\t\treturn () => globalVar.removeEventListener( eventName, cb );\n\t\t\t\t} );\n\t\t\t} );\n\t};\n};\n\n/**\n * Creates a directive that adds an async event listener to the global window or\n * document object.\n *\n * @param type 'window' or 'document'\n */\nconst getGlobalAsyncEventDirective = (\n\ttype: 'window' | 'document'\n): DirectiveCallback => {\n\treturn ( { directives, evaluate } ) => {\n\t\tdirectives[ `on-async-${ type }` ]\n\t\t\t.filter( isNonDefaultDirectiveSuffix )\n\t\t\t.forEach( ( entry ) => {\n\t\t\t\tconst eventName = entry.suffix.split( '--', 1 )[ 0 ];\n\t\t\t\tuseInit( () => {\n\t\t\t\t\tconst cb = async ( event: Event ) => {\n\t\t\t\t\t\tawait splitTask();\n\t\t\t\t\t\tconst result = evaluate( entry );\n\t\t\t\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\t\t\t\tresult( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tconst globalVar = type === 'window' ? window : document;\n\t\t\t\t\tglobalVar.addEventListener( eventName, cb, {\n\t\t\t\t\t\tpassive: true,\n\t\t\t\t\t} );\n\t\t\t\t\treturn () => globalVar.removeEventListener( eventName, cb );\n\t\t\t\t} );\n\t\t\t} );\n\t};\n};\n\nexport default () => {\n\t// data-wp-context\n\tdirective(\n\t\t'context',\n\t\t( {\n\t\t\tdirectives: { context },\n\t\t\tprops: { children },\n\t\t\tcontext: inheritedContext,\n\t\t} ) => {\n\t\t\tconst { Provider } = inheritedContext;\n\t\t\tconst defaultEntry = context.find( isDefaultDirectiveSuffix );\n\t\t\tconst { client: inheritedClient, server: inheritedServer } =\n\t\t\t\tuseContext( inheritedContext );\n\n\t\t\tconst ns = defaultEntry!.namespace;\n\t\t\tconst client = useRef( proxifyState( ns, {} ) );\n\t\t\tconst server = useRef( proxifyState( ns, {}, { readOnly: true } ) );\n\n\t\t\t// No change should be made if `defaultEntry` does not exist.\n\t\t\tconst contextStack = useMemo( () => {\n\t\t\t\tconst result = {\n\t\t\t\t\tclient: { ...inheritedClient },\n\t\t\t\t\tserver: { ...inheritedServer },\n\t\t\t\t};\n\t\t\t\tif ( defaultEntry ) {\n\t\t\t\t\tconst { namespace, value } = defaultEntry;\n\t\t\t\t\t// Check that the value is a JSON object. Send a console warning if not.\n\t\t\t\t\tif ( ! isPlainObject( value ) ) {\n\t\t\t\t\t\twarn(\n\t\t\t\t\t\t\t`The value of data-wp-context in \"${ namespace }\" store must be a valid stringified JSON object.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tdeepMerge(\n\t\t\t\t\t\tclient.current,\n\t\t\t\t\t\tdeepClone( value ) as object,\n\t\t\t\t\t\tfalse\n\t\t\t\t\t);\n\t\t\t\t\tdeepMerge( server.current, deepClone( value ) as object );\n\t\t\t\t\tresult.client[ namespace ] = proxifyContext(\n\t\t\t\t\t\tclient.current,\n\t\t\t\t\t\tinheritedClient[ namespace ]\n\t\t\t\t\t);\n\t\t\t\t\tresult.server[ namespace ] = proxifyContext(\n\t\t\t\t\t\tserver.current,\n\t\t\t\t\t\tinheritedServer[ namespace ]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}, [ defaultEntry, inheritedClient, inheritedServer ] );\n\n\t\t\treturn createElement( Provider, { value: contextStack }, children );\n\t\t},\n\t\t{ priority: 5 }\n\t);\n\n\t// data-wp-watch--[name]\n\tdirective( 'watch', ( { directives: { watch }, evaluate } ) => {\n\t\twatch.forEach( ( entry ) => {\n\t\t\tuseWatch( () => {\n\t\t\t\tlet start;\n\t\t\t\tif ( globalThis.IS_GUTENBERG_PLUGIN ) {\n\t\t\t\t\tif ( globalThis.SCRIPT_DEBUG ) {\n\t\t\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t\t\tstart = performance.now();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet result = evaluate( entry );\n\t\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\t\tresult = result();\n\t\t\t\t}\n\t\t\t\tif ( globalThis.IS_GUTENBERG_PLUGIN ) {\n\t\t\t\t\tif ( globalThis.SCRIPT_DEBUG ) {\n\t\t\t\t\t\tperformance.measure(\n\t\t\t\t\t\t\t`interactivity api watch ${ entry.namespace }`,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\tend: performance.now(),\n\t\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\t\tdevtools: {\n\t\t\t\t\t\t\t\t\t\ttrack: `IA: watch ${ entry.namespace }`,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} );\n\t\t} );\n\t} );\n\n\t// data-wp-init--[name]\n\tdirective( 'init', ( { directives: { init }, evaluate } ) => {\n\t\tinit.forEach( ( entry ) => {\n\t\t\t// TODO: Replace with useEffect to prevent unneeded scopes.\n\t\t\tuseInit( () => {\n\t\t\t\tlet start;\n\t\t\t\tif ( globalThis.IS_GUTENBERG_PLUGIN ) {\n\t\t\t\t\tif ( globalThis.SCRIPT_DEBUG ) {\n\t\t\t\t\t\tstart = performance.now();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet result = evaluate( entry );\n\t\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\t\tresult = result();\n\t\t\t\t}\n\t\t\t\tif ( globalThis.IS_GUTENBERG_PLUGIN ) {\n\t\t\t\t\tif ( globalThis.SCRIPT_DEBUG ) {\n\t\t\t\t\t\tperformance.measure(\n\t\t\t\t\t\t\t`interactivity api init ${ entry.namespace }`,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\tend: performance.now(),\n\t\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\t\tdevtools: {\n\t\t\t\t\t\t\t\t\t\ttrack: `IA: init ${ entry.namespace }`,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} );\n\t\t} );\n\t} );\n\n\t// data-wp-on--[event]\n\tdirective( 'on', ( { directives: { on }, element, evaluate } ) => {\n\t\tconst events = new Map< string, Set< DirectiveEntry > >();\n\t\ton.filter( isNonDefaultDirectiveSuffix ).forEach( ( entry ) => {\n\t\t\tconst event = entry.suffix.split( '--' )[ 0 ];\n\t\t\tif ( ! events.has( event ) ) {\n\t\t\t\tevents.set( event, new Set< DirectiveEntry >() );\n\t\t\t}\n\t\t\tevents.get( event )!.add( entry );\n\t\t} );\n\n\t\tevents.forEach( ( entries, eventType ) => {\n\t\t\tconst existingHandler = element.props[ `on${ eventType }` ];\n\t\t\telement.props[ `on${ eventType }` ] = ( event: Event ) => {\n\t\t\t\tentries.forEach( ( entry ) => {\n\t\t\t\t\tif ( existingHandler ) {\n\t\t\t\t\t\texistingHandler( event );\n\t\t\t\t\t}\n\t\t\t\t\tlet start;\n\t\t\t\t\tif ( globalThis.IS_GUTENBERG_PLUGIN ) {\n\t\t\t\t\t\tif ( globalThis.SCRIPT_DEBUG ) {\n\t\t\t\t\t\t\tstart = performance.now();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst result = evaluate( entry );\n\t\t\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\t\t\tif ( ! result?.sync ) {\n\t\t\t\t\t\t\tevent = wrapEventAsync( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult( event );\n\t\t\t\t\t}\n\t\t\t\t\tif ( globalThis.IS_GUTENBERG_PLUGIN ) {\n\t\t\t\t\t\tif ( globalThis.SCRIPT_DEBUG ) {\n\t\t\t\t\t\t\tperformance.measure(\n\t\t\t\t\t\t\t\t`interactivity api on ${ entry.namespace }`,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line no-undef\n\t\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\t\tend: performance.now(),\n\t\t\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\t\t\tdevtools: {\n\t\t\t\t\t\t\t\t\t\t\ttrack: `IA: on ${ entry.namespace }`,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t};\n\t\t} );\n\t} );\n\n\t// data-wp-on-async--[event]\n\tdirective(\n\t\t'on-async',\n\t\t( { directives: { 'on-async': onAsync }, element, evaluate } ) => {\n\t\t\tconst events = new Map< string, Set< DirectiveEntry > >();\n\t\t\tonAsync\n\t\t\t\t.filter( isNonDefaultDirectiveSuffix )\n\t\t\t\t.forEach( ( entry ) => {\n\t\t\t\t\tconst event = entry.suffix.split( '--' )[ 0 ];\n\t\t\t\t\tif ( ! events.has( event ) ) {\n\t\t\t\t\t\tevents.set( event, new Set< DirectiveEntry >() );\n\t\t\t\t\t}\n\t\t\t\t\tevents.get( event )!.add( entry );\n\t\t\t\t} );\n\n\t\t\tevents.forEach( ( entries, eventType ) => {\n\t\t\t\tconst existingHandler = element.props[ `on${ eventType }` ];\n\t\t\t\telement.props[ `on${ eventType }` ] = ( event: Event ) => {\n\t\t\t\t\tif ( existingHandler ) {\n\t\t\t\t\t\texistingHandler( event );\n\t\t\t\t\t}\n\t\t\t\t\tentries.forEach( async ( entry ) => {\n\t\t\t\t\t\tawait splitTask();\n\t\t\t\t\t\tconst result = evaluate( entry );\n\t\t\t\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\t\t\t\tresult( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t};\n\t\t\t} );\n\t\t}\n\t);\n\n\t// data-wp-on-window--[event]\n\tdirective( 'on-window', getGlobalEventDirective( 'window' ) );\n\t// data-wp-on-document--[event]\n\tdirective( 'on-document', getGlobalEventDirective( 'document' ) );\n\n\t// data-wp-on-async-window--[event]\n\tdirective( 'on-async-window', getGlobalAsyncEventDirective( 'window' ) );\n\t// data-wp-on-async-document--[event]\n\tdirective(\n\t\t'on-async-document',\n\t\tgetGlobalAsyncEventDirective( 'document' )\n\t);\n\n\t// data-wp-class--[classname]\n\tdirective(\n\t\t'class',\n\t\t( { directives: { class: classNames }, element, evaluate } ) => {\n\t\t\tclassNames\n\t\t\t\t.filter( isNonDefaultDirectiveSuffix )\n\t\t\t\t.forEach( ( entry ) => {\n\t\t\t\t\tconst className = entry.suffix;\n\t\t\t\t\tlet result = evaluate( entry );\n\t\t\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\t\t\tresult = result();\n\t\t\t\t\t}\n\t\t\t\t\tconst currentClass = element.props.class || '';\n\t\t\t\t\tconst classFinder = new RegExp(\n\t\t\t\t\t\t`(^|\\\\s)${ className }(\\\\s|$)`,\n\t\t\t\t\t\t'g'\n\t\t\t\t\t);\n\t\t\t\t\tif ( ! result ) {\n\t\t\t\t\t\telement.props.class = currentClass\n\t\t\t\t\t\t\t.replace( classFinder, ' ' )\n\t\t\t\t\t\t\t.trim();\n\t\t\t\t\t} else if ( ! classFinder.test( currentClass ) ) {\n\t\t\t\t\t\telement.props.class = currentClass\n\t\t\t\t\t\t\t? `${ currentClass } ${ className }`\n\t\t\t\t\t\t\t: className;\n\t\t\t\t\t}\n\n\t\t\t\t\tuseInit( () => {\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t * This seems necessary because Preact doesn't change the class\n\t\t\t\t\t\t * names on the hydration, so we have to do it manually. It doesn't\n\t\t\t\t\t\t * need deps because it only needs to do it the first time.\n\t\t\t\t\t\t */\n\t\t\t\t\t\tif ( ! result ) {\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\telement.ref as RefObject< HTMLElement >\n\t\t\t\t\t\t\t ).current!.classList.remove( className );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\telement.ref as RefObject< HTMLElement >\n\t\t\t\t\t\t\t ).current!.classList.add( className );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t}\n\t);\n\n\t// data-wp-style--[style-prop]\n\tdirective( 'style', ( { directives: { style }, element, evaluate } ) => {\n\t\tstyle.filter( isNonDefaultDirectiveSuffix ).forEach( ( entry ) => {\n\t\t\tconst styleProp = entry.suffix;\n\t\t\tlet result = evaluate( entry );\n\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\tresult = result();\n\t\t\t}\n\t\t\telement.props.style = element.props.style || {};\n\t\t\tif ( typeof element.props.style === 'string' ) {\n\t\t\t\telement.props.style = cssStringToObject( element.props.style );\n\t\t\t}\n\t\t\tif ( ! result ) {\n\t\t\t\tdelete element.props.style[ styleProp ];\n\t\t\t} else {\n\t\t\t\telement.props.style[ styleProp ] = result;\n\t\t\t}\n\n\t\t\tuseInit( () => {\n\t\t\t\t/*\n\t\t\t\t * This seems necessary because Preact doesn't change the styles on\n\t\t\t\t * the hydration, so we have to do it manually. It doesn't need deps\n\t\t\t\t * because it only needs to do it the first time.\n\t\t\t\t */\n\t\t\t\tif ( ! result ) {\n\t\t\t\t\t(\n\t\t\t\t\t\telement.ref as RefObject< HTMLElement >\n\t\t\t\t\t ).current!.style.removeProperty( styleProp );\n\t\t\t\t} else {\n\t\t\t\t\t( element.ref as RefObject< HTMLElement > ).current!.style[\n\t\t\t\t\t\tstyleProp\n\t\t\t\t\t] = result;\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t} );\n\n\t// data-wp-bind--[attribute]\n\tdirective( 'bind', ( { directives: { bind }, element, evaluate } ) => {\n\t\tbind.filter( isNonDefaultDirectiveSuffix ).forEach( ( entry ) => {\n\t\t\tconst attribute = entry.suffix;\n\t\t\tlet result = evaluate( entry );\n\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\tresult = result();\n\t\t\t}\n\t\t\telement.props[ attribute ] = result;\n\n\t\t\t/*\n\t\t\t * This is necessary because Preact doesn't change the attributes on the\n\t\t\t * hydration, so we have to do it manually. It only needs to do it the\n\t\t\t * first time. After that, Preact will handle the changes.\n\t\t\t */\n\t\t\tuseInit( () => {\n\t\t\t\tconst el = ( element.ref as RefObject< HTMLElement > ).current!;\n\n\t\t\t\t/*\n\t\t\t\t * We set the value directly to the corresponding HTMLElement instance\n\t\t\t\t * property excluding the following special cases. We follow Preact's\n\t\t\t\t * logic: https://github.com/preactjs/preact/blob/ea49f7a0f9d1ff2c98c0bdd66aa0cbc583055246/src/diff/props.js#L110-L129\n\t\t\t\t */\n\t\t\t\tif ( attribute === 'style' ) {\n\t\t\t\t\tif ( typeof result === 'string' ) {\n\t\t\t\t\t\tel.style.cssText = result;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t} else if (\n\t\t\t\t\tattribute !== 'width' &&\n\t\t\t\t\tattribute !== 'height' &&\n\t\t\t\t\tattribute !== 'href' &&\n\t\t\t\t\tattribute !== 'list' &&\n\t\t\t\t\tattribute !== 'form' &&\n\t\t\t\t\t/*\n\t\t\t\t\t * The value for `tabindex` follows the parsing rules for an\n\t\t\t\t\t * integer. If that fails, or if the attribute isn't present, then\n\t\t\t\t\t * the browsers should \"follow platform conventions to determine if\n\t\t\t\t\t * the element should be considered as a focusable area\",\n\t\t\t\t\t * practically meaning that most elements get a default of `-1` (not\n\t\t\t\t\t * focusable), but several also get a default of `0` (focusable in\n\t\t\t\t\t * order after all elements with a positive `tabindex` value).\n\t\t\t\t\t *\n\t\t\t\t\t * @see https://html.spec.whatwg.org/#tabindex-value\n\t\t\t\t\t */\n\t\t\t\t\tattribute !== 'tabIndex' &&\n\t\t\t\t\tattribute !== 'download' &&\n\t\t\t\t\tattribute !== 'rowSpan' &&\n\t\t\t\t\tattribute !== 'colSpan' &&\n\t\t\t\t\tattribute !== 'role' &&\n\t\t\t\t\tattribute in el\n\t\t\t\t) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tel[ attribute ] =\n\t\t\t\t\t\t\tresult === null || result === undefined\n\t\t\t\t\t\t\t\t? ''\n\t\t\t\t\t\t\t\t: result;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t} catch ( err ) {}\n\t\t\t\t}\n\t\t\t\t/*\n\t\t\t\t * aria- and data- attributes have no boolean representation.\n\t\t\t\t * A `false` value is different from the attribute not being\n\t\t\t\t * present, so we can't remove it.\n\t\t\t\t * We follow Preact's logic: https://github.com/preactjs/preact/blob/ea49f7a0f9d1ff2c98c0bdd66aa0cbc583055246/src/diff/props.js#L131C24-L136\n\t\t\t\t */\n\t\t\t\tif (\n\t\t\t\t\tresult !== null &&\n\t\t\t\t\tresult !== undefined &&\n\t\t\t\t\t( result !== false || attribute[ 4 ] === '-' )\n\t\t\t\t) {\n\t\t\t\t\tel.setAttribute( attribute, result );\n\t\t\t\t} else {\n\t\t\t\t\tel.removeAttribute( attribute );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t} );\n\n\t// data-wp-ignore\n\tdirective(\n\t\t'ignore',\n\t\t( {\n\t\t\telement: {\n\t\t\t\ttype: Type,\n\t\t\t\tprops: { innerHTML, ...rest },\n\t\t\t},\n\t\t}: {\n\t\t\telement: any;\n\t\t} ) => {\n\t\t\t// Preserve the initial inner HTML.\n\t\t\tconst cached = useMemo( () => innerHTML, [] );\n\t\t\treturn createElement( Type, {\n\t\t\t\tdangerouslySetInnerHTML: { __html: cached },\n\t\t\t\t...rest,\n\t\t\t} );\n\t\t}\n\t);\n\n\t// data-wp-text\n\tdirective( 'text', ( { directives: { text }, element, evaluate } ) => {\n\t\tconst entry = text.find( isDefaultDirectiveSuffix );\n\t\tif ( ! entry ) {\n\t\t\telement.props.children = null;\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tlet result = evaluate( entry );\n\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\tresult = result();\n\t\t\t}\n\t\t\telement.props.children =\n\t\t\t\ttypeof result === 'object' ? null : result.toString();\n\t\t} catch ( e ) {\n\t\t\telement.props.children = null;\n\t\t}\n\t} );\n\n\t// data-wp-run\n\tdirective( 'run', ( { directives: { run }, evaluate } ) => {\n\t\trun.forEach( ( entry ) => {\n\t\t\tlet result = evaluate( entry );\n\t\t\tif ( typeof result === 'function' ) {\n\t\t\t\tresult = result();\n\t\t\t}\n\t\t\treturn result;\n\t\t} );\n\t} );\n\n\t// data-wp-each--[item]\n\tdirective(\n\t\t'each',\n\t\t( {\n\t\t\tdirectives: { each, 'each-key': eachKey },\n\t\t\tcontext: inheritedContext,\n\t\t\telement,\n\t\t\tevaluate,\n\t\t} ) => {\n\t\t\tif ( element.type !== 'template' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { Provider } = inheritedContext;\n\t\t\tconst inheritedValue = useContext( inheritedContext );\n\n\t\t\tconst [ entry ] = each;\n\t\t\tconst { namespace } = entry;\n\n\t\t\tlet iterable = evaluate( entry );\n\t\t\tif ( typeof iterable === 'function' ) {\n\t\t\t\titerable = iterable();\n\t\t\t}\n\n\t\t\tif ( typeof iterable?.[ Symbol.iterator ] !== 'function' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst itemProp = isNonDefaultDirectiveSuffix( entry )\n\t\t\t\t? kebabToCamelCase( entry.suffix )\n\t\t\t\t: 'item';\n\n\t\t\tconst result: VNode< any >[] = [];\n\n\t\t\tfor ( const item of iterable ) {\n\t\t\t\tconst itemContext = proxifyContext(\n\t\t\t\t\tproxifyState( namespace, {} ),\n\t\t\t\t\tinheritedValue.client[ namespace ]\n\t\t\t\t);\n\t\t\t\tconst mergedContext = {\n\t\t\t\t\tclient: {\n\t\t\t\t\t\t...inheritedValue.client,\n\t\t\t\t\t\t[ namespace ]: itemContext,\n\t\t\t\t\t},\n\t\t\t\t\tserver: { ...inheritedValue.server },\n\t\t\t\t};\n\n\t\t\t\t// Set the item after proxifying the context.\n\t\t\t\tmergedContext.client[ namespace ][ itemProp ] = item;\n\n\t\t\t\tconst scope = {\n\t\t\t\t\t...getScope(),\n\t\t\t\t\tcontext: mergedContext.client,\n\t\t\t\t\tserverContext: mergedContext.server,\n\t\t\t\t};\n\t\t\t\tconst key = eachKey\n\t\t\t\t\t? getEvaluate( { scope } )( eachKey[ 0 ] )\n\t\t\t\t\t: item;\n\n\t\t\t\tresult.push(\n\t\t\t\t\tcreateElement(\n\t\t\t\t\t\tProvider,\n\t\t\t\t\t\t{ value: mergedContext, key },\n\t\t\t\t\t\telement.props.content\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t{ priority: 20 }\n\t);\n\n\tdirective( 'each-child', () => null, { priority: 1 } );\n};\n"],"mappings":"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","ignoreList":[]}