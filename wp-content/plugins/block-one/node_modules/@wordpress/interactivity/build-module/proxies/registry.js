const objToProxy = /* @__PURE__ */ new WeakMap();
const proxyToObj = /* @__PURE__ */ new WeakMap();
const proxyToNs = /* @__PURE__ */ new WeakMap();
const supported = /* @__PURE__ */ new Set([Object, Array]);
const createProxy = (namespace, obj, handlers) => {
  if (!shouldProxy(obj)) {
    throw Error("This object cannot be proxified.");
  }
  if (!objToProxy.has(obj)) {
    const proxy = new Proxy(obj, handlers);
    objToProxy.set(obj, proxy);
    proxyToObj.set(proxy, obj);
    proxyToNs.set(proxy, namespace);
  }
  return objToProxy.get(obj);
};
const getProxyFromObject = (obj) => objToProxy.get(obj);
const getNamespaceFromProxy = (proxy) => proxyToNs.get(proxy);
const shouldProxy = (candidate) => {
  if (typeof candidate !== "object" || candidate === null) {
    return false;
  }
  return !proxyToNs.has(candidate) && supported.has(candidate.constructor);
};
const getObjectFromProxy = (proxy) => proxyToObj.get(proxy);
export {
  createProxy,
  getNamespaceFromProxy,
  getObjectFromProxy,
  getProxyFromObject,
  shouldProxy
};
//# sourceMappingURL=registry.js.map
