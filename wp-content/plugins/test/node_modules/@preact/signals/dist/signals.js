var r,i,n=require("preact"),t=require("preact/hooks"),e=require("@preact/signals-core");function f(r,i){n.options[r]=i.bind(null,n.options[r]||function(){})}function o(r){if(i)i();i=r&&r.S()}function u(r){var i=this,f=r.data,o=useSignal(f);o.value=f;var u=t.useMemo(function(){var r=i.__v;while(r=r.__)if(r.__c){r.__c.__$f|=4;break}i.__$u.c=function(){var r,t=i.__$u.S(),e=u.value;t();if(n.isValidElement(e)||3!==(null==(r=i.base)?void 0:r.nodeType)){i.__$f|=1;i.setState({})}else i.base.data=e};return e.computed(function(){var r=o.value.value;return 0===r?0:!0===r?"":r||""})},[]);return u.value}u.displayName="_st";Object.defineProperties(e.Signal.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:u},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});f("__b",function(r,i){if("string"==typeof i.type){var n,t=i.props;for(var f in t)if("children"!==f){var o=t[f];if(o instanceof e.Signal){if(!n)i.__np=n={};n[f]=o;t[f]=o.peek()}}}r(i)});f("__r",function(i,n){o();var t,f=n.__c;if(f){f.__$f&=-2;if(void 0===(t=f.__$u))f.__$u=t=function(r){var i;e.effect(function(){i=this});i.c=function(){f.__$f|=1;f.setState({})};return i}()}r=f;o(t);i(n)});f("__e",function(i,n,t,e){o();r=void 0;i(n,t,e)});f("diffed",function(i,n){o();r=void 0;var t;if("string"==typeof n.type&&(t=n.__e)){var e=n.__np,f=n.props;if(e){var u=t.U;if(u)for(var v in u){var c=u[v];if(void 0!==c&&!(v in e)){c.d();u[v]=void 0}}else t.U=u={};for(var s in e){var l=u[s],p=e[s];if(void 0===l){l=a(t,s,p,f);u[s]=l}else l.o(p,f)}}}i(n)});function a(r,i,n,t){var f=i in r&&void 0===r.ownerSVGElement,o=e.signal(n);return{o:function(r,i){o.value=r;t=i},d:e.effect(function(){var n=o.value.value;if(t[i]!==n){t[i]=n;if(f)r[i]=n;else if(n)r.setAttribute(i,n);else r.removeAttribute(i)}})}}f("unmount",function(r,i){if("string"==typeof i.type){var n=i.__e;if(n){var t=n.U;if(t){n.U=void 0;for(var e in t){var f=t[e];if(f)f.d()}}}}else{var o=i.__c;if(o){var u=o.__$u;if(u){o.__$u=void 0;u.d()}}}r(i)});f("__h",function(r,i,n,t){if(t<3||9===t)i.__$f|=2;r(i,n,t)});n.Component.prototype.shouldComponentUpdate=function(r,i){var n=this.__$u,t=n&&void 0!==n.s;for(var e in i)return!0;if(this.__f||"boolean"==typeof this.u&&!0===this.u){if(!(t||2&this.__$f||4&this.__$f))return!0;if(1&this.__$f)return!0}else{if(!(t||4&this.__$f))return!0;if(3&this.__$f)return!0}for(var f in r)if("__source"!==f&&r[f]!==this.props[f])return!0;for(var o in this.props)if(!(o in r))return!0;return!1};function useSignal(r){return t.useMemo(function(){return e.signal(r)},[])}exports.Signal=e.Signal;exports.batch=e.batch;exports.computed=e.computed;exports.effect=e.effect;exports.signal=e.signal;exports.untracked=e.untracked;exports.useComputed=function(i){var n=t.useRef(i);n.current=i;r.__$f|=4;return t.useMemo(function(){return e.computed(function(){return n.current()})},[])};exports.useSignal=useSignal;exports.useSignalEffect=function(r){var i=t.useRef(r);i.current=r;t.useEffect(function(){return e.effect(function(){return i.current()})},[])};//# sourceMappingURL=signals.js.map
